<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MyBank ‚Äî Simulador Banc√°rio</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè¶</text></svg>">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --bg: #121212;
      --surface: #1e1e1e;
      --text: #f0f0f0;
      --text-secondary: #aaa;
      --primary: #4da6ff;
      --success: #4caf50;
      --danger: #f44336;
      --border: #333;
      --shadow: 0 4px 20px rgba(0,0,0,0.4);
      --radius: 16px;
      --font: 'Segoe UI', system-ui, sans-serif;
    }
    body {
      font-family: var(--font);
      background-color: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding: 20px;
    }
    .container {
      max-width: 500px;
      margin: 0 auto;
    }

    /* Tela de Login */
    #login-screen {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 30px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }
    #login-screen h2 {
      text-align: center;
      margin-bottom: 25px;
      font-size: 1.8rem;
      color: var(--primary);
    }
    .input-group {
      margin-bottom: 20px;
    }
    .input-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text-secondary);
    }
    .input-group input {
      width: 100%;
      padding: 14px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #2a2a2a;
      color: white;
      font-size: 1.1rem;
    }
    .btn {
      width: 100%;
      padding: 14px;
      background: var(--primary);
      color: #000;
      border: none;
      border-radius: 12px;
      font-weight: 700;
      font-size: 1.1rem;
      cursor: pointer;
      transition: background 0.2s;
    }
    .btn:hover {
      background: #3399ff;
    }

    /* App (ap√≥s login) */
    #app {
      display: none;
    }
    header {
      text-align: center;
      margin-bottom: 25px;
    }
    header h1 {
      font-size: 2.1rem;
      font-weight: 800;
    }
    header h1 span {
      color: var(--primary);
    }

    .card {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 22px;
      margin-bottom: 22px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }

    .balance {
      font-size: 2.2rem;
      font-weight: 800;
      color: var(--success);
      text-align: center;
      margin: 10px 0;
    }

    .action-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin: 20px 0;
    }
    .action-btn {
      padding: 14px;
      background: #2a2a2a;
      border: 1px solid var(--border);
      border-radius: 12px;
      color: var(--text);
      font-weight: 700;
      cursor: pointer;
      transition: background 0.2s;
      text-align: center;
    }
    .action-btn:hover {
      background: #333;
    }

    .form-group {
      margin: 15px 0;
    }
    .form-group input {
      width: 100%;
      padding: 13px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: #2a2a2a;
      color: white;
      font-size: 1rem;
    }

    .transaction-list {
      max-height: 300px;
      overflow-y: auto;
      padding-right: 10px;
    }
    .transaction {
      padding: 12px 0;
      border-bottom: 1px solid #333;
      display: flex;
      justify-content: space-between;
    }
    .transaction:last-child {
      border: none;
    }
    .transaction-desc {
      font-size: 0.95rem;
    }
    .transaction-amount {
      font-weight: 700;
    }
    .credit { color: var(--success); }
    .debit { color: var(--danger); }

    .logout {
      margin-top: 20px;
      background: #333 !important;
      color: var(--text) !important;
    }
    .logout:hover {
      background: #444 !important;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Tela de Login -->
    <div id="login-screen">
      <h2>üè¶ MyBank</h2>
      <div class="input-group">
        <label for="cpf">CPF (apenas n√∫meros)</label>
        <input type="text" id="cpf" placeholder="12345678900" maxlength="11" />
      </div>
      <div class="input-group">
        <label for="password">Senha</label>
        <input type="password" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
      </div>
      <button class="btn" onclick="login()">Entrar</button>
      <p style="text-align:center; margin-top:15px; font-size:0.9rem; color:var(--text-secondary);">
        Use qualquer CPF e senha para testar.
      </p>
    </div>

    <!-- App Principal -->
    <div id="app">
      <header>
        <h1>My<span>Bank</span></h1>
        <p>Conta digital simulada</p>
      </header>

      <div class="card">
        <div>Saldo Dispon√≠vel</div>
        <div class="balance" id="balance">R$ 0,00</div>
        <div style="text-align:center; font-size:0.9rem; color:var(--text-secondary);">
          Conta Poupan√ßa ‚Ä¢ Ag: 0001 Cc: 123456-7
        </div>
      </div>

      <div class="card">
        <div class="action-grid">
          <div class="action-btn" onclick="showTransfer()">üì§ Transferir</div>
          <div class="action-btn" onclick="showReceive()">üì• Receber</div>
        </div>

        <div id="transfer-form" style="display:none;">
          <div class="form-group">
            <input type="text" id="transfer-cpf" placeholder="CPF do destinat√°rio" maxlength="11" />
          </div>
          <div class="form-group">
            <input type="number" id="transfer-amount" placeholder="Valor (R$)" min="0.01" step="0.01" />
          </div>
          <button class="btn" onclick="performTransfer()">Confirmar Transfer√™ncia</button>
          <button class="btn logout" style="margin-top:10px;" onclick="hideTransfer()">Cancelar</button>
        </div>

        <div id="receive-form" style="display:none; text-align:center;">
          <p style="margin-bottom:15px;">Seu CPF para recebimento:</p>
          <p style="font-size:1.2rem; font-weight:700; color:var(--primary);" id="user-cpf"></p>
          <p style="font-size:0.9rem; color:var(--text-secondary); margin-top:15px;">
            Compartilhe seu CPF com quem quiser te pagar.
          </p>
          <button class="btn logout" style="margin-top:20px;" onclick="hideReceive()">Fechar</button>
        </div>
      </div>

      <div class="card">
        <h3 style="margin-bottom:15px; color:var(--primary);">Hist√≥rico</h3>
        <div class="transaction-list" id="transactions">
          <div style="text-align:center; color:var(--text-secondary);">Nenhuma transa√ß√£o ainda</div>
        </div>
      </div>

      <button class="btn logout" onclick="logout()">Sair da Conta</button>
    </div>
  </div>

  <script>
    // Estado inicial
    let currentUser = null;
    const defaultBalance = 1250.75;
    const transactionsKey = 'mybank_transactions';
    const userKey = 'mybank_user';

    // Inicializar
    document.addEventListener('DOMContentLoaded', () => {
      const savedUser = localStorage.getItem(userKey);
      if (savedUser) {
        currentUser = JSON.parse(savedUser);
        showApp();
        loadTransactions();
      }
    });

    // Login
    function login() {
      const cpf = document.getElementById('cpf').value.replace(/\D/g, '');
      const password = document.getElementById('password').value;

      if (cpf.length !== 11 || password.length < 4) {
        alert('Por favor, insira um CPF v√°lido e uma senha com pelo menos 4 caracteres.');
        return;
      }

      // Simular login (qualquer CPF/senha funciona)
      currentUser = { cpf, balance: defaultBalance };
      localStorage.setItem(userKey, JSON.stringify(currentUser));
      showApp();
      loadTransactions();
    }

    // Mostrar app
    function showApp() {
      document.getElementById('login-screen').style.display = 'none';
      document.getElementById('app').style.display = 'block';
      document.getElementById('balance').textContent = `R$ ${currentUser.balance.toFixed(2).replace('.', ',')}`;
      document.getElementById('user-cpf').textContent = formatCPF(currentUser.cpf);
    }

    // Logout
    function logout() {
      currentUser = null;
      localStorage.removeItem(userKey);
      localStorage.removeItem(transactionsKey);
      document.getElementById('app').style.display = 'none';
      document.getElementById('login-screen').style.display = 'block';
      document.getElementById('cpf').value = '';
      document.getElementById('password').value = '';
    }

    // Formatar CPF
    function formatCPF(cpf) {
      return cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
    }

    // Mostrar/ocultar formul√°rios
    function showTransfer() {
      document.getElementById('transfer-form').style.display = 'block';
      document.getElementById('receive-form').style.display = 'none';
    }
    function hideTransfer() {
      document.getElementById('transfer-form').style.display = 'none';
    }
    function showReceive() {
      document.getElementById('receive-form').style.display = 'block';
      document.getElementById('transfer-form').style.display = 'none';
    }
    function hideReceive() {
      document.getElementById('receive-form').style.display = 'none';
    }

    // Realizar transfer√™ncia
    function performTransfer() {
      const destCpf = document.getElementById('transfer-cpf').value.replace(/\D/g, '');
      const amount = parseFloat(document.getElementById('transfer-amount').value);

      if (destCpf.length !== 11) {
        alert('CPF do destinat√°rio inv√°lido.');
        return;
      }
      if (isNaN(amount) || amount <= 0) {
        alert('Valor inv√°lido.');
        return;
      }
      if (amount > currentUser.balance) {
        alert('Saldo insuficiente.');
        return;
      }

      // Atualizar saldo
      currentUser.balance -= amount;
      localStorage.setItem(userKey, JSON.stringify(currentUser));
      document.getElementById('balance').textContent = `R$ ${currentUser.balance.toFixed(2).replace('.', ',')}`;

      // Adicionar transa√ß√µes
      addTransaction(-amount, `Transfer√™ncia para ${formatCPF(destCpf)}`);
      // (Em um app real, o destinat√°rio receberia aqui)

      alert('Transfer√™ncia realizada com sucesso!');
      hideTransfer();
      document.getElementById('transfer-cpf').value = '';
      document.getElementById('transfer-amount').value = '';
    }

    // Adicionar transa√ß√£o
    function addTransaction(amount, description) {
      const transactions = JSON.parse(localStorage.getItem(transactionsKey) || '[]');
      const transaction = {
        id: Date.now(),
        amount,
        description,
        date: new Date().toLocaleString('pt-BR')
      };
      transactions.unshift(transaction);
      localStorage.setItem(transactionsKey, JSON.stringify(transactions));
      loadTransactions();
    }

    // Carregar transa√ß√µes
    function loadTransactions() {
      const transactions = JSON.parse(localStorage.getItem(transactionsKey) || '[]');
      const container = document.getElementById('transactions');
      
      if (transactions.length === 0) {
        container.innerHTML = '<div style="text-align:center; color:var(--text-secondary);">Nenhuma transa√ß√£o ainda</div>';
        return;
      }

      container.innerHTML = transactions.map(t => `
        <div class="transaction">
          <div class="transaction-desc">${t.description}<br><small>${t.date}</small></div>
          <div class="transaction-amount ${t.amount >= 0 ? 'credit' : 'debit'}">
            ${t.amount >= 0 ? '+' : ''} R$ ${Math.abs(t.amount).toFixed(2).replace('.', ',')}
          </div>
        </div>
      `).join('');
    }
  </script>
</body>
</html>
